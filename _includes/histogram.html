<div>This is a histogram showing dollor amount.</div>
<div class='histogram'></div>
<script>
var width = 960,
    height = 480;

var svg = d3.select('.histogram')
  .append('svg')
  .attr('width',width)
  .attr('height',height);

d3.csv('data/pledges.csv',function(error,data){
  var dollars = data.map(function(d){return parseInt(d.dollars)});

  var counts = _.countBy(dollars);

  var x = d3.scale.ordinal() // treat the numbers as categories
    .rangeRoundBands([0, width], .1)
    .domain([0,_.size(counts)]);

  var y = d3.scale.linear()
    .range([height,0])
    .domain([0,_.max(counts)]);

  var bar = svg.selectAll('.bar')
    .data(_.pairs(counts)) // 165 data point
  .enter()
    .append('g')
    .attr('class','bar')
    .attr("transform", function(d) { return "translate(" + x(d[0]) + ",0)"; });

  bar.append('rect')
    .attr('y',function(d){return y(d[1]);})
    .attr('height',function(d){return height-y(d[1]);})
    .attr("width", x.rangeBand())
    .style('fill','#ccc');


// histogram divides values into intervals
// var histogram = d3.layout.histogram()
//     .bins(20)
//     (dollars);
//
// var bars = svg.selectAll('.bar')
//     .data(histogram)
//   .enter()
//     .append('g');

});
</script>
