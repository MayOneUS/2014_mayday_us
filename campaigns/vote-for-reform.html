---
layout: default
title: Contact Us - We're eager to hear from you - MAYDAY.US
omit_title_suffix: true
cssid: vote-for-reform
hideSidebar: true
---

{% capture subhead %} A citizen-funded super PAC, to end all super PACs. {% endcapture %}
{% capture pageid %} vote-for-reform {% endcapture %}

{% capture content %}

<div class="row">
  <div class="col-md-8">
    <svg></svg>
    <p class="view">
      <span id="house" class="cursor">House </span><span id="senate" class="active cursor">Senate </span>
      <span>&nbsp;</span>
      <span>&nbsp;</span>
      <span class="mayday box">&nbsp;</span><span> Mayday Endorsed</span>
      <span class="reform box">&nbsp;</span><span> Suppors Reform</span>
      <span class="no-supporters box">&nbsp;</span><span> No Supporters</span>
    </p>
    <div id="candidates"></div>
  </div>
  <div class="col-md-4">
    <div id="js-query">
      <h2>#VoteForReform! Find your reform candidate!</h2>
      <p>Use this handy map to locate pro-reform candidates in your district and state. By entering your <zip/address?> we will locate candidates who have pledged to stop the corrupting influence of big money on politics. Before you go to the polls on Nov. 4 be sure to use this map so that you can vote for reform.</p>
      <form id="lookup-form" name="contact" method="get" action="/contact-us/">
        <div class="form-group">
          <label for="address">Address</label>
          <input type="text" name="address" id="address" value="" class="form-control" />
        </div>

        <div class="form-group">
          <label for="city">City</label>
          <input type="text" name="city" id="city" value="" class="form-control" />
        </div>

        <div class="form-group">
          <label for="subject">State</label>
          <input type="text" name="subject" id="subject" value="minnesota" class="form-control" />
        </div>

        <div class="form-group">
          <label for="zip">Zip</label>
          <input name="zip" id="zip" class="form-control"/>
        </div>

        <div class="form-actions">
          <button class="btn btn-primary pull-right" type="submit">Lookup</button>
        </div>
      </form>
    </div>
    <div id="js-no-candidates" style="display:none;">
      <h2>No reform candidates in your area.</h2>
      <p>Too bad! Help us change that. You can start by using the link below to support anti-corruption candidates by sharing with your friends <LINK to Voterlogix OR LINK to "paid for by" messaging pages></p>
    </div>

    <div id="js-vote" style="display:none;">
      <h2>Here are your candidates. #VoteForReform</h2>
      <div id="candidate-template" class="hidden row">
        <div class="col-md-5">
          <img src="#" alt="#">
          <h4 class="capitalize"></h4>
          <h5></h5>
        </div>
        <div class="col-md-7">
          <p></p>
        </div>
      </div>
      <form id="email-form" name="contact" method="get" action="/contact-us/">
        <h3>Commit to vote for reform</h3>
        <input type="hidden" name="redirect" value="https://mayday.us/campaings/vote-for-reform-share/">
        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" name="email" id="email" value="" class="form-control" placeholder="Email Address" />
        </div>

        <div class="checkbox">
            <label>
              <input type="checkbox" name="future_email_opt_in" checked="checked"> Sign up to join the MAYDAY.US mailing list.
            </label>
          </div>
        <div class="form-actions">
          <button class="btn btn-primary pull-right" type="submit">I'm voting for reform.</button>
        </div>
        <p><small>If you enter your email here, we will send you a reminder on Election Day with information about how to vote for your reform candidate.</small></p>
      </form>
    </div>

  </div>
</div>

<style type="text/css" media="screen">
  .capitalize{text-transform:capitalize;}
</style>
<link rel="stylesheet" href="/css/vote-for-reform-map.css">
<script src="/data/vote-for-reform-map/reformer-data.js" type="text/javascript" charset="utf-8"></script>
<script>
function parseFormData() {
  var output = [];
  var address_values = $('form input, form textarea').each(function() { output.push(this.value) } );
  return output.join(' ');
}

function filterValidContests(contests){
  output = contests.filter(function(data){
    return data.hasOwnProperty('roles') &&
    data.hasOwnProperty('level') &&
    data.level[0] == "country" &&
    /legislatorUpperBody|legislatorLowerBody/.test(data.roles[0]);
  });
  return output;
}

function filterRelevantReformers(userStateAbbr) {
  output = reformData.reformers.filter(function(data){ return data.state == userStateAbbr });
  return output;
}

function aggregateAndProcessCandidateInfo (relevantReformers,contests) {
  $(relevantReformers).each(function() {
    var reformer = this;
    targetContest = contests.filter(function(data){ return data.roles[0] == reformer.role })[0];
    if(targetContest){
      reformerRegex = new RegExp(reformer.last_name,'i');
      targetCandidateInfo = targetContest.candidates.filter(function(data){ return reformerRegex.test(data.name) })[0];

      if(targetCandidateInfo){
        $.extend(reformer, targetCandidateInfo);
        parseTemplateValues(reformer);
      }
    }
  });
  removeInactiveReformers(relevantReformers)
}

function removeInactiveReformers(reformers){
  toRemove = []
  $(reformers).each(function(i, elem){
    if (!elem.hasOwnProperty('candidateUrl')){toRemove.push(i)}
  });
  $(toRemove.reverse()).each(function() {
    reformers.splice(this,1)
  })
}

function parseTemplateValues(reformer){
  reformer.state_name = targetContest.district.name;
  reformer.contest_name = (reformer.role == 'legislatorLowerBody' ? 'Congress' : 'Senate');
  reformer.first_name = reformer.first_name.toLowerCase();
  reformer.last_name = reformer.last_name.toLowerCase();
  reformer.full_name = [reformer.first_name, reformer.last_name].join(' ');
  reformer.bio_url = reformer.endorsed ? reformer.mayday_url : reformer.candidateUrl;
  reformer.bioguide_id = reformer.bioguide_id.length > 4 ? reformer.bioguide_id : 'unavailable';

  reformer.bio_text = '<span class="capitalize">' + reformer.full_name + '</span> is a candidate who supports ' + parseSupportedLegislation(reformer.reforms) + '. ';
  reformer.bio_text += reformer.endorsed ? ('<strong><span class="capitalize">'+reformer.last_name + '</span> is formally endorsed by MADAY.us.</strong> ') : '';
  reformer.bio_text += reformer.bio_url.length > 5 ? ('You can learn more about <a href="' + reformer.bio_url + '" target="_blank"><span class="capitalize">' + reformer.last_name + '</span> here</a>.') : '';
}

function parseSupportedLegislation(supportedIds){
  if(supportedIds.length > 0){
    output = reformData.reforms.filter(function(data){
      return $.inArray(data.id, supportedIds);
    })
    output =  $(output).map(function(reform){ return reform.title}).join(', ').replace(/, ([\w]*)$/, "and $1");
  }else{
    output = 'campaign reform';
  }
  return output;
}

function addReformerCandidate(reformer) {
  $template = $('#js-vote .row.hidden').clone().removeClass('hidden') ;

  $template.find('h4').text(reformer.full_name);
  $template.find('h5').text(reformer.contest_name);
  $template.find('p').html(reformer.bio_text);
  $template.find('img').prop('src', '/images/congress/' + reformer.bioguide_id + '.jpg')
  console.log($template);
  $('#email-form').before($template);
}

function promptStepTwo(relevantReformers) {
  $('#js-query').slideUp('0.2');
  if(relevantReformers.length > 0){
    $(relevantReformers).each(function(){
      addReformerCandidate(this);
    })
    $('#js-vote').slideDown('0.2');
  }else{
    $('#js-no-candidates').slideDown('0.2');
  }
}

$(document).ready(function(){
  $.get('http://api.reform.to/reformers/index.json')
  $('#lookup-form').validate({
    rules: {
      // address: {required: true },
      // subject: {required: true },
      // message: {required: true }
    },
    submitHandler: function(form) {
      $(form).css('opacity','0.5');
      $(form).find('input, textarea, button').prop('disabled',true);

      var address = parseFormData();
      $.get('https://www.googleapis.com/civicinfo/v2/voterinfo?electionId=4100&key=AIzaSyAcfA2Xf9-f3EfsmfU4gF6upJP8crRVQ4w&address=' + address)
      .done(function(data) {
        userStateAbbr = data.normalizedInput.state;
        var validContests = filterValidContests(data.contests);
        var relevantReformers = filterRelevantReformers(userStateAbbr);
        aggregateAndProcessCandidateInfo(relevantReformers,validContests);
        promptStepTwo(relevantReformers)

      }).fail(function() {
        $(form).find('input, textarea, button').prop('disabled',false);
        $(form).css('opacity','1');
      });
    }
  });
});
</script>

<script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js" type="text/javascript" charset="utf-8"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.13/d3.min.js" type="text/javascript" charset="utf-8"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/queue-async/1.0.7/queue.min.js" type="text/javascript" charset="utf-8"></script>
<script src="/js/vendor/topojson.v1.min.js"></script>
<script src="/js/map.js"></script>
{% endcapture %}

{% include subpage_fullwidth.html %}

